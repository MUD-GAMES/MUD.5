!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SPARouter=e():t.SPARouter=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r.r(e);var c=function(){function t(){i(this,t)}return u(t,[{key:"isString",value:function(t){return"[object String]"===Object.prototype.toString.call(t)}},{key:"isNumber",value:function(t){return"[object Number]"===Object.prototype.toString.call(t)}},{key:"isRegExp",value:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{key:"isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{key:"isObject",value:function(t){return"[object Object]"===Object.prototype.toString.call(t)}},{key:"isFunction",value:function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{key:"isBoolean",value:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)}},{key:"isNull",value:function(t){return"[object Null]"===Object.prototype.toString.call(t)}},{key:"isUndefined",value:function(t){return"[object Undefined]"===Object.prototype.toString.call(t)}},{key:"isEmpty",value:function(t){return this.isUndefined(t)||this.isNull(t)||0===t||!1===t||(this.isString(t)||this.isArray(t))&&0===t.length||this.isObject(t)&&0===Object.getOwnPropertyNames(t).length}},{key:"isSet",value:function(t){return!this.isUndefined(t)&&!this.isNull(t)}}]),t}();function s(t){var e=c.isSet(t)?"".concat(t," argument is required. None found"):"Required argument was not found",r=new Error(e);return r.name="ArgumentNotFoundError",r.message=e,r.toString=function(){return instace.message},Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,s),r}function l(t,e,r){e=c.isSet(e)?e.toString():o(e);var n=c.isSet(t)?"typeof ".concat(t.toString()," argument must be equal to ").concat(e,". ").concat(o(r)," found."):"Invalid argument type found",i=new Error(n);return i.name="ArgumentTypeError",i.message=n,i.toString=function(){return this.message},Object.setPrototypeOf(i,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(i,l),i}c=new c,s.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),l.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?(Object.setPrototypeOf(s,Error),Object.setPrototypeOf(l,Error)):(s.__proto__=Error,l.__proto__=Error);var f,p=[],h=[],y="",g=function(t){return decodeURIComponent(t)},w=function(t){return decodeURIComponent(t.split(" ").join(""))},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null;return e?r=h[e][t]:h.some(function(e){if(e.hasOwnProperty(t))return r=e[t]}),r},m=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),y=r||window.location.search,(f=!!(window.PopStateEvent&&"pushState"in window.history)&&n)&&window.addEventListener("popstate",function(t){var r=t.currentTarget;return y=r.location.search,p=[],h=[],e.init()}),this.init()}return u(t,[{key:"init",value:function(){y&&y.slice(1).split("&").forEach(function(t){t=t.split("="),p.push(w(t[0]));var e={};e[w(t[0])]=!(t.length>1)||g(t[1]),h.push(e)},this)}},{key:"keys",value:function(){return p}},{key:"has",value:function(t){return t=w(t),!!(p.length>0&&v(t))}},{key:"get",value:function(t){return t=w(t),this.has(t)?v(t):null}},{key:"getAll",value:function(t){return t=w(t),this.has(t)?v(t).split(","):[]}},{key:"toString",value:function(){var t="";return y&&(t="?",p.forEach(function(e,r){var n=!0===v(e,r)?"":"=".concat(v(e,r)),o=0===r?e+n:"&".concat(e+n);t+=o})),t}},{key:"append",value:function(t,e){if(!c.isSet(t))throw new ArgNotFound("key");t=w(t),e=!c.isSet(e)||g(e);var r=p.push(t)-1;return h[r]=n({},t,e),y=!y||this.toString(),f&&window.history.pushState("","",this.toString()),v(t,r)}},{key:"set",value:function(t,e){if(!c.isSet(t))throw new ArgNotFound("key");t=w(t),e=!c.isSet(e)||g(e),y=y||!0;var r=p.indexOf(t);return-1!==r?(p[r]=t,h[r]=n({},t,e)):(r=p.push(t)-1,h[r]=n({},t,e)),y=!y||this.toString(),f&&window.history.pushState("","",this.toString()),v(t,r)}},{key:"delete",value:function(t){if(!c.isSet(t))throw new ArgNotFound("key");if(t=w(t),!this.has(t))return this.has(t);var e=p.indexOf(t),r=h[e][t];return p.splice(e,1),h.splice(e,1),y=!y||this.toString(),f&&window.history.pushState("","",this.toString()),r}}]),t}();function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routes=[],this.path=this._requestPath();var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){d(t,e,r[e])})}return t}({},{caseInsensitive:!0,historyMode:!1},e);for(var n in r)this["_".concat(n)]=r[n];return this._checkHistoryMode(),this.query=new m(null,this._historyMode),this}var e,r,n;return e=t,(r=[{key:"get",value:function(e,r,n){if(!c.isSet(e))throw new s("uri");if(!c.isSet(r))throw new s("callback");if(!c.isString(e))throw new l("uri","string",e);if(!c.isFunction(r))throw new l("callback","function",r);var o={uri:null,callback:null,thisArg:n=n instanceof t?void 0:n,parameters:null,regExp:null,name:null,current:!1};return this._caseInsensitive&&(e=e.toLowerCase()),e=e.startsWith("/")?e:"/".concat(e),this.routes.forEach(function(t){if(t.uri===e)throw new Error("Conflicting routes. The route uri ".concat(t.uri," already exists"))}),o.uri=e,o.callback=r,o.parameters=this._proccessParameters(o.uri),this.routes.push(o),this}},{key:"where",value:function(t,e){if(!c.isSet(t))throw new s("name");if(!c.isSet(e))throw new s("regExp");if(!c.isString(t))throw new l("name","string",t);if(!c.isString(e))throw new l("regExp","string",e);var r=this.routes[this.routes.length-1];if(0===r.parameters.length)throw new Error("No Parameters Found: Could not set paramater regExpression for [".concat(r.uri,"] because the route has no parameters"));e=(e=e.replace(/\(/g,"\\(")).replace(/\)/g,"\\)"),e="(".concat(e,"+)");var n=!1;if(r.parameters.forEach(function(r,o){void 0!==r[t]&&(n=!0,r[t].regExp=e)}),!n)throw new Error("Invalid Parameter: Could not set paramater regExpression for [".concat(r.uri,"] because the parameter [").concat(t,"] does not exist"));return this}},{key:"setName",value:function(t){if(!c.isSet(t))throw new s("name");if(!c.isString(t))throw new l("name","string",t);var e=this.routes[this.routes.length-1];return this.routes.forEach(function(e){if(e.name===t)throw new Error("Duplicate naming. A route with name ".concat(t," already exists"))}),e.name=t,this}},{key:"init",value:function(){var t=this;this.routes.forEach(function(e){t._proccessRegExp(e)},this);var e=!1,r={pathFor:function(e,r){return t._pathFor(e,r)},goTo:function(e,r,n){return t._goTo(e,r,n)},historyMode:this._historyMode};if(this.routes.some(function(n){if(t._requestPath().match(n.regExp)){n.current=!0,e=!0;var o={};return o.param=t._processRequestParameters(n),o.query=t.query,o.uri=window.location.pathname,n.callback.call(n.thisArg,o,r)}},this),!e){if(!this._notFoundFunction)return;var n={};return n.uri=window.location.pathname,this._notFoundFunction(n,r)}}},{key:"notFoundHandler",value:function(t){if(!c.isSet(t))throw new s("callback");if(!c.isFunction(t))throw new l("callback","function",t);return this._notFoundFunction=t,this}},{key:"redirect",value:function(t,e){return this}},{key:"group",value:function(){}},{key:"_goTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!c.isSet(t))throw new s("url");if(!c.isString(t))throw new l("url","string",t);if(c.isEmpty(t))throw new TypeError("url cannot be empty");return this._historyMode?(window.history.pushState(e,r,t),this.init()):(window.localStorage.setItem("pushState",e),window.location.href=t)}},{key:"_pathFor",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!c.isSet(t))throw new s("name");if(!c.isString(t))throw new l("name","string",string);if(c.isEmpty(t))throw new TypeError("name cannot be empty");var n,o=!1;if(this.routes.some(function(i){if(i.name===t&&(o=!0,n=i.uri,e._containsParameter(n))){if(!c.isSet(paramaters))throw new s("parameters");if(!c.isObject(r))throw new l("parameters","object",r);if(c.isEmpty(r))throw new TypeError("parameters cannot be empty");var a=[],u=!0,f=!1,p=void 0;try{for(var h,y=i.uri.match(/\{(\w+)\}/g)[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){var g=h.value;g=(g=g.replace("{","")).replace("}",""),a.push(g)}}catch(t){f=!0,p=t}finally{try{u||null==y.return||y.return()}finally{if(f)throw p}}if(a.length!==Object.getOwnPropertyNames(r).length)throw new Error("The route with name [".concat(t,"] contains ").concat(a.length," parameters. ").concat(Object.getOwnPropertyNames(r).length," given"));for(var w in r){if(!a.includes(w))throw new Error("Invalid parameter name [".concat(w,"]"));var v=new RegExp("{".concat(w,"}"),"g");n=n.replace(v,r[w])}}}),!o)throw new Error("Invalid route name [".concat(t,"]"));return n}},{key:"_proccessParameters",value:function(t){var e=[],r=0;return this._containsParameter(t)&&t.replace(/\{\w+\}/g,function(t){r++,t.replace(/\w+/,function(t){var n={};n[t]={sn:r,regExp:"([^\\/]+)",value:null},e.push(n)})}),e}},{key:"_proccessRegExp",value:function(t){var e=t.uri;return e=(e=(e=e.replace(/\//g,"\\/")).replace(/\./g,"\\.")).replace("/","/?"),this._containsParameter(t.uri)&&e.replace(/{\w+}/g,function(r){var n=r.replace("{","");return n=n.replace("}",""),t.parameters.some(function(t){if(void 0!==t[n])return e=e.replace(r,t[n].regExp)}),r}),e="^".concat(e,"$"),t.regExp=new RegExp(e),t}},{key:"_containsParameter",value:function(t){return t.search(/{\w+}/g)>=0}},{key:"_processRequestParameters",value:function(t){var e=this._requestPath().match(t.regExp);if(e){var r={};return e.forEach(function(e,n){if(0!==n){var o=Object.getOwnPropertyNames(t.parameters[n-1]);r[o]=e}}),r}}},{key:"_requestPath",value:function(){return window.location.pathname}},{key:"_checkHistoryMode",value:function(){var t=this;if(this._historyMode&&(window.PopStateEvent||!(!1 in history)))return window.addEventListener("popstate",function(e){t.init()}),this}}])&&b(e.prototype,r),n&&b(e,n),t}();e.default=S}]).default});